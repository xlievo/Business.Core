
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>APIs Documents</title>

    <link rel="stylesheet" type="text/css" href="/doc2/bootstrap-3.3.7/css/bootstrap.min.css">
    <!-- JSON Schema Based Editor -->
    <script src="/doc2/jsoneditor/jsoneditor.min.js"></script>
    <!-- Collapse -->
    <link rel="stylesheet" type="text/css" href="/doc2/houdini/css/houdini.min.css">
    <script src="/doc2/houdini/js/houdini.polyfills.min.js"></script>
    <!-- Ajax request -->
    <script src="/doc2/atomic/atomic.polyfills.min.js"></script>
    <!-- Ajax.org Cloud9 Editor -->
    <script src="/doc2/ace/ace.js"></script>

    <!--<link rel='stylesheet' href='//cdn.jsdelivr.net/foundation/5.0.2/css/foundation.min.css'>
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>-->
    <!-- Optional theme -->
    <!--<link rel="stylesheet" href="/doc2/font-awesome_2.css">-->
    <!--//tab-content well well-small-->
    <style type="text/css">
        /*.tab-content well well-small {
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            border-top-width: 0px;
            border-right-width: 0px;
            border-bottom-width: 0px;
            border-left-width: 0px;
            margin-bottom: 0px;
        }*/

        .panel-padding {
            padding-top: 10px;
            padding-bottom: 10px;
            padding-right: 10px;
            padding-left: 10px;
        }
    </style>


    <script>
        // Set the default CSS theme and icon library globally
        //JSONEditor.defaults.theme = 'foundation5';
        //JSONEditor.defaults.iconlib = 'fontawesome4';
        JSONEditor.defaults.theme = 'bootstrap3';
        JSONEditor.defaults.iconlib = 'bootstrap3';
        //JSONEditor.defaults.options.iconlib = "bootstrap2";

        JSONEditor.defaults.options.disable_properties = true;
        JSONEditor.defaults.options.required_by_default = true;
        JSONEditor.defaults.options.disable_edit_json = true;

    </script>
</head>
<body>

    <div class='container'>


        <div class='medium-12-columns'>
            <button id='submit' class='tiny'>Submit (console.log)</button>
            <button id='restore' class='secondary tiny'>Restore to Default</button>
            <span id='valid_indicator' class='label'></span>
        </div>


        <div class="panel-group">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h4>
                        <span class="d-inline-block">Well done!</span>
                        <span class="pull-right">
                            <a data-houdini-toggle="A">Detailed description</a>
                        </span>
                    </h4>
                    <hr>
                    <p class="mb-0">Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
                </div>

                <div data-houdini id='A' class="panel-padding">
                    <div id='editor_holder'></div>
                    <div id='editor_holder2'></div>
                </div>
            </div>
        </div>




    </div>

    <script>

        var disclosure = new Houdini('[data-houdini]');

        let doc = null;

        getDoc("http://localhost:5000/API.doc")
            .then(c => {
                if (null == c) {
                    return;
                }
                doc = c;
                console.log(doc);

                
            });

        //console.log(doc);

        var starting_value = {
            name: "John Smith",
            age: 35,
            gender: "male",
            location: {
                city: "San Francisco",
                state: "California"
            },
            pets: [
                {
                    name: "Spot",
                    type: "dog",
                    fixed: true
                },
                {
                    name: "Whiskers",
                    type: "cat",
                    fixed: false
                }
            ]
        };

        // Initialize the editor
        var editor = new JSONEditor(document.getElementById('editor_holder'), {
            //iconlib: "foundation2",
            //form_name_root: "root",
            // Enable fetching schemas via ajax
            ajax: true,

            // The schema for the editor
            schema: {
                $ref: "person.json"
                //, format: "grid"
            },

            // Seed the form with a starting value
            startval: starting_value
        });

        // Initialize the editor
        var editor2 = new JSONEditor(document.getElementById('editor_holder2'), {
            form_name_root: "root2",
            // Enable fetching schemas via ajax
            ajax: true,
            //theme: 'barebones',
            //// The schema for the editor
            //schema: {
            //    type: "string",
            //    format: "json",
            //    options: {
            //        ace: {
            //            theme: "ace/theme/vibrant_ink",
            //            tabSize: 2,
            //            useSoftTabs: true,
            //            wrap: true,
            //            readOnly: true,
            //            minLines: 20,
            //            maxLines: 100
            //        }
            //    }
            //},
            schema: {
                title: "SDK",
                type: "object",
                format: "categories",
                //basicCategoryTitle: "Main",
                properties: {
                    NET: {
                        type: "object",
                        properties: {
                            NET: {
                                type: "string",
                                format: "json",
                                options: {
                                    ace: {
                                        theme: "ace/theme/vibrant_ink",
                                        tabSize: 2,
                                        useSoftTabs: true,
                                        wrap: true,
                                        readOnly: true,
                                        minLines: 20,
                                        maxLines: 100,
                                        highlightActiveLine: false,
                                        highlightSelectedWord: false
                                    }
                                }
                            }
                        },
                        options: {
                            collapsed: false,
                            disable_collapse: true
                        }
                    },
                    Java: {
                        type: "object",
                        properties: {
                            Java: {
                                type: "string",
                                format: "java",
                                options: {
                                    ace: {
                                        theme: "ace/theme/vibrant_ink",
                                        tabSize: 2,
                                        useSoftTabs: true,
                                        wrap: true,
                                        readOnly: false,
                                        minLines: 20,
                                        maxLines: 100
                                    }
                                }
                            }
                        },
                        options: {
                            collapsed: false,
                            disable_collapse: true
                        }
                    },
                    PHP: {
                        type: "object",
                        properties: {
                            PHP: {
                                type: "string",
                                format: "php",
                                options: {
                                    ace: {
                                        theme: "ace/theme/vibrant_ink",
                                        tabSize: 2,
                                        useSoftTabs: true,
                                        wrap: true,
                                        readOnly: false,
                                        minLines: 20,
                                        maxLines: 100
                                    }
                                }
                            }
                        },
                        options: {
                            collapsed: false,
                            disable_collapse: true
                        }
                    }
                }
                //,default: ["{\n  \"type\": \"string\",\n  \"format\": \"json\",\n  \"options\": {\n    \"ace\": {\n      \"theme\": \"ace/theme/vibrant_ink\",\n      \"tabSize\": 2,\n      \"useSoftTabs\": true,\n      \"wrap\": true,\n      \"readOnly\": true,\n      \"newLineMode\": \"windows\"\n    }\n  }\n}", "{\n  \"type\": \"string\",\n  \"format\": \"json\",\n  \"options\": {\n    \"ace\": {\n      \"theme\": \"ace/theme/vibrant_ink\",\n      \"tabSize\": 2,\n      \"useSoftTabs\": true,\n      \"wrap\": true,\n      \"readOnly\": true,\n      \"newLineMode\": \"windows\"\n    }\n  }\n}"]
            }

            // Seed the form with a starting value
            , startval: {
                "NET": {
                    //"NET": "var httpClient = System.Net.Http.HttpClientFactory.Create(new System.Net.Http.HttpClientHandler());\nvar msg = await httpClient.GetStringAsync(\"http://www.baidu.com\");"
                    "NET": "{\n  \"type\": \"string\",\n  \"format\": \"json\",\n  \"options\": {\n    \"ace\": {\n      \"theme\": \"ace/theme/vibrant_ink\",\n      \"tabSize\": 2,\n      \"useSoftTabs\": true,\n      \"wrap\": true,\n      \"readOnly\": true,\n      \"newLineMode\": \"windows\"\n    }\n  }\n}"
                },
                "Java": {
                    "Java": "{\n  \"type\": \"string\",\n  \"format\": \"json\",\n  \"options\": {\n    \"ace\": {\n      \"theme\": \"ace/theme/vibrant_ink\",\n      \"tabSize\": 2,\n      \"useSoftTabs\": true,\n      \"wrap\": true,\n      \"readOnly\": true,\n      \"newLineMode\": \"windows\"\n    }\n  }\n}"
                },
                "PHP": {
                    "PHP": "{\n  \"type\": \"string\",\n  \"format\": \"json\",\n  \"options\": {\n    \"ace\": {\n      \"theme\": \"ace/theme/vibrant_ink\",\n      \"tabSize\": 2,\n      \"useSoftTabs\": true,\n      \"wrap\": true,\n      \"readOnly\": true,\n      \"newLineMode\": \"windows\"\n    }\n  }\n}"
                }
            }
        });
        //
        document.querySelector('#NET > div > div > h3').style.display = 'none';
        document.querySelector('#Java > div > div > h3').style.display = 'none';
        document.querySelector('#PHP > div > div > h3').style.display = 'none';
        document.querySelector('#NET > div > div > div.well.well-sm > div > div > div > div > div.form-group > label').style.display = 'none';
        document.querySelector('#Java > div > div > div.well.well-sm > div > div > div > div > div.form-group > label').style.display = 'none';
        document.querySelector('#PHP > div > div > div.well.well-sm > div > div > div > div > div.form-group > label').style.display = 'none';
        document.querySelector('#editor_holder2 > div > div.well.well-sm > div > div').style.cssText = 'padding: 0px;border: 0px;margin: 0px;';

        // Hook up the submit button to log to the console
        document.getElementById('submit').addEventListener('click', function () {
            // Get the value from the editor
            console.log(getData(editor, ['root.location', 'root.pets']));
        });

        function getData(editor, args) {
            for (var index = args.length - 1; index >= 0; index--) {
                args[index] = JSON.stringify(editor.getEditor(args[index]).getValue());
            }
            return JSON.stringify(args)
        }

        function getDoc(url) {
            return atomic(url)
                .then(function (response) {
                    //console.log(response.data); // xhr.responseText
                    //console.log(response.xhr);  // full response
                    return response.data;
                })
                .catch(function (error) {
                    //console.log(error.status); // xhr.status
                    //console.log(error.statusText); // xhr.statusText
                    return null;
                });
        }


        // Hook up the Restore to Default button
        document.getElementById('restore').addEventListener('click', function () {
            editor.setValue(starting_value);
        });

        // Hook up the validation indicator to update its
        // status whenever the editor changes
        editor.on('change', function () {
            // Get an array of errors from the validator
            var errors = editor.validate();

            var indicator = document.getElementById('valid_indicator');

            // Not valid
            if (errors.length) {
                indicator.className = 'label alert';
                indicator.textContent = 'not valid';
            }
            // Valid
            else {
                indicator.className = 'label success';
                indicator.textContent = 'valid';
            }
        });



    </script>
</body>
</html>
